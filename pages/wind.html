<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wind Power</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../assets/favicon_io/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../style/loading.css">
    <link rel="stylesheet" href="../style/wind.css">
    <script src="../js/wind.js"></script>
</head>
<body scroll="no" style="overflow: hidden;" onload="removeloader()">
    <div id="page-content">
	
        <div style="width:100px;">
        <div style="position:absolute;  top:50%; left: 50%; transform: translate(-50%, -50%);"> <!-- Change this value to move whole logo -->
          <div style="display:static; position:relative; overflow:hidden; width:300px; height: 300px;">
            <img src="../assets/favicon_io/android-chrome-512x512.png" alt="Logo" id="center">
            <div id="orbitX">
            </div>
            <div id="orbitY">
              <p style="margin: 0 0 0 90px;"></p>
            </div>
            <div id="orbitZ">
              <p style="margin: 25px 0 0 75px;"></p>
            </div>
          </div>   
        </div>
        </div>
      </div>
    <div class="container">
        <!-- <?xml version="1.0" encoding="utf-8" ?> -->
        <div class="turbine">
            <object id="windTurbineWidget" role="svidget" data="windTurbineWidget.svg" type="image/svg+xml" width="200" height="300">
                <param name="rpm" value="80" />
                <param name="color" value="#d6d6d6" />
                <param name="shadeColor" value="#a0a6a7" />
                <param name="backgroundColor" value="transparent" />
            </object>
            <svg class="turbine1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svidget="http://www.svidget.org/svidget"
                width="200" height="300" viewBox="0 0 189.326 283.989" style="background:transparent">
           <title>Wind Turbine Widget</title>
           <desc>
               Wind turbine widget with spinning blades.
               Pass in a rpm value.
               This widget was developed by Joe Agster for svidget.io and is licensed under the Creative Commons Attribution 4.0 License.
           </desc>
       
           <svidget:params>
               <svidget:param name="rpm" shortname="r" type="number" description="The rotations per minute." onset="handleDataParamSet" />
               <svidget:param name="color" shortname="c" type="string" subtype="color" description="The main color of the blades and tower." binding="#blade-front@fill, #tower@fill, #nacelle@fill" />
               <svidget:param name="shadeColor" shortname="sc" type="string" subtype="color" description="The shading color." binding="#blade-side@fill, #base@fill, #gearbox@stroke" />
               <svidget:param name="backgroundColor" shortname="bc" type="string" subtype="color" description="The background color." onset="handleUIParamSet" />
           </svidget:params>
       
           <svidget:actions>
           </svidget:actions>
           
           <svidget:events>
           </svidget:events>
               
           <style>
               .hidden { visibility: hidden; }	
    
               /* Animation */		
               @keyframes spin { 				
                   from { transform: rotate(0deg); } 				
                   to { transform: rotate(360deg); }			
               }				
    
               #wind-blade { width: 258.63px; 
                   height: 258.63px; 
                   transform-origin: 94.663px 94.663px; 
                   animation: spin 0s linear infinite; 
                   transform: rotate(15deg); 
               }				
           </style>
       
           <defs>
           </defs>
       
           <symbol id="blade">
               <path fill="#e6e6e6" id="blade-front" d="M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z" />
               <path fill="#d0d6d7" id="blade-side" d="M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z" />
           </symbol>
       
           <g>
               <g id="structure" transform="translate(58.123, 82.664)" fill-rule="nonzero">
                   <polygon id="tower" fill="#e6e6e6" points="33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176" />
                   <path id="yaw" fill="rgba(0,0,0,0.25)" d="M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"/>
                   <path id="base" fill="#d0d6d7" transform="translate(0 42)" d="M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z" />
                   <circle id="nacelle" fill="#e6e6e6" cx="36.54" cy="12" r="11.93" />
                   <circle id="gearbox" fill="none" stroke="#d0d6d7" stroke-width="2.75" cx="36.538" cy="11.999" r="5.8" />
               </g>
               <g id="wind-blade" style="animation: spin 1.25s linear infinite;">
                   <use id="blade1" href="#blade" x="83.24" y="0" />
                   <use id="blade2" href="#blade" x="83.24" y="0" transform="rotate(120 94.663 94.663)" />
                   <use id="blade3" href="#blade" x="83.24" y="0" transform="rotate(-120 94.663 94.663)" />
               </g>
           </g>
           
       
           <script type="application/javascript" xlink:href="./scripts/svidget.min.js"></script>
            </svg>
        </div>
        
        <div class="controls">
            <div class="slidecontainer">
                <h3 class="velocity">Velocity of Air</h4> 
                <input type="range" min="1" max="50" value="12" class="slider" id="myRange" oninput="always(this.value)">
                <div id="demo"></div>
                <div class="result">
                    <div class="rpm"><span class="bold">RPM of the blades: 20</span></div>
                    <div class="power"><span class="bold">Power Generated: 6 MW</span></div>
                </div>
                <button class="reset" onclick="reset()">Reset</button>
            </div>
            <div class="scontainer">
                <img src="../assets/station.png" alt="Station" class="station">
                <h3 class="powerd">Power: 6 W</h3>
            </div>
        </div>
    </div>

    <script>
        const loader = document.querySelector("#page-content");
        const body  = document.querySelector("body");
  
        const removeloader = () => {
          loader.style.opacity = "0";
          setTimeout(() => {
            loader.remove();
            body.removeAttribute("scroll");
            body.removeAttribute("style");
          }, 1000);
        }
      </script>

    <script type="application/javascript">
    
        var slider = document.getElementById("myRange");
        var output = document.getElementById("demo");
        var rpmoutput = document.querySelector(".rpm");
        var poweroutput = document.querySelector(".power");
        var poweroutputd = document.querySelector(".powerd");
        var velocity= slider.value;
        output.innerHTML = velocity + " ms<sup>-1</sup>" // Display the default slider value

        // Update the current slider value (each time you drag the slider handle)

        function always(value) {
            RPM = calculateRPM(value);
            output.innerHTML = value + " ms<sup>-1</sup>";
            rpmoutput.innerHTML = `<span class="bold">RPM of the blades: ${Math.floor(RPM)}</span>`;
            poweroutput.innerHTML = `<span class="bold">Power Generated: ${Math.floor(calculatePower(value))} W</span>`;
            poweroutputd.innerHTML = `<span class="bold">Power: ${Math.floor(calculatePower(value))} W</span>`;
            init();
        }
        
    
        // constants
        var CENTER_X = 200;
        var CENTER_Y = 200;

        // properties
        var _loaded = false;
        var rpm = 20;
        var blades = null;
        
        
        /* Loading */
        
        // entry point
        function init() {
            //debugger;
            console.log('init');
            // init stuff
            blades = document.getElementById("wind-blade");
            initParams();
            draw();

            _loaded = true;
        }
        
        function initParams() {
            loadParams();
        }
        
        window.addEventListener('load', init, false);
        
        
        /* Param Loading */
        
        function loadParams() {
            console.log("rpm="+rpm);
            console.log("RPM="+RPM);
            rpm = RPM;
        }
        
        function handleDataParamSet(e) {
            if (!_loaded) return;
            loadParams();
            draw();
        }
        
        function handleUIParamSet(e) {
            document.rootElement.style.backgroundColor = e.value.value;
        }
        

        /* Drawing */
        
        function draw() {
            rpm = fixRPM(rpm);
            if (rpm == 0) {
                blades.style.animationDuration = "0s";
            }
            else {
                var secs = 60 / rpm;
                blades.style.animationDuration = secs + "s";
            }
        }
        
        function fixRPM(rpm) {
            if (rpm < 0) return 0;
            return rpm;
        }
        
        const slidervalue = document.querySelector(".slider");
        
        const reset = () => {
            slidervalue.value = 12;
            always(12);
        }
    </script>
</body>
</html>